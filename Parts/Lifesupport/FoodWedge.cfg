PART:NEEDS[USILifeSupport|TacLifeSupport]
{
// Common to all parts in the mod
// ------------------------------

		module = Part
		author = Daishi, DMagic, and Paul Kingtiger 
		manufacturer = New Horizons & Nox Industrial
		subcategory = 0

		
// Stuff that gets tweaked and balanced a lot
// ------------------------------------------

		title = Universal Storage Supply Bag
		category = Utility
		
		cost = 240
		mass = 0.125
		
		TechRequired = spaceExploration
		entryCost = 2800

		maxTemp = 1200
		
		fuelCrossFeed = False

		bulkheadProfiles = wedge
		crashTolerance = 5

	
// Stuff in here should have stable values
// ---------------------------------------

		description = Designed to fit within wedge mounting bays, these expandable tanks lack a bulky external structure, and are consequently delicate with a low dry mass. Contains a variety of processed, tasty foodstuffs. Just add your own water, flavor, coloring, and texture!
	
		rescaleFactor = 1
	
	
// This shouldn't be changing at all!
// ----------------------------------


		tags = Universal Storage Wedge Supply Food Snacks
			
		attachRules = 1,0,1,1,0
		
		//KIS
		MODULE:NEEDS[KIS]
		{
			name = ModuleKISItem
			shortcutKeyAction = drop
			useName = use
			usableFromEva = false
			usableFromContainer = false
			usableFromPod = false
			usableFromEditor = false
			stackable = false
			volumeOverride = 0
			editorItemsCategory = true
			moveSndPath = KIS/Sounds/itemMove
			equipSlot = jetpack
			equipMode = part
			equipSlot = <null>
			equipSkill = <null>
			equipRemoveHelmet = false
			equipMeshName = jetpack_base01
			equipBoneName = bn_jetpack01
			equipPos = (0,-0.05,-0.3)
			equipDir = (0,270,0)
			carriable = true
			allowPartAttach = 1   
			allowStaticAttach = 0
		}
		
			
// Don't edit anything below this line.  Here be dragons!
// ------------------------------------------------------

		name = USFoodWedge

	// Drag
		angularDrag = 1
		dragModelType = default
		maximum_drag = 0.2
		minimum_drag = 0.2

		DRAG_CUBE
		{
			cube = A0, 0.3212,0.7782,0.4438, 0.3214,0.8341,0.579, 0.2837,0.9228,0.3438, 0.2837,0.9158,0.4566, 0.2347,0.7108,0.474, 0.2346,0.7142,0.5711, 0.02652,0.1767,0.0004198, 0.5494,0.4692,0.7518
			cube = A1, 0.6052,0.8122,0.4702, 0.605,0.8419,0.5819, 0.2862,0.914,0.7276, 0.2862,0.9128,0.9343, 0.4406,0.7001,0.4841, 0.4406,0.703,0.5879, 0.02652,-0.01583,-0.001675, 0.5494,0.8542,0.7798
			cube = A2, 0.9046,0.7812,0.4513, 0.9055,0.8424,0.5878, 0.2966,0.9109,1.328, 0.297,0.913,1.328, 0.6583,0.7245,0.5892, 0.6583,0.7274,0.5892, 0.0227,-0.2187,-5.96E-08, 0.557,1.26,0.7821
			cube = A3, 1.195,0.7945,0.472, 1.195,0.8444,0.5878, 0.2949,0.911,1.732, 0.2951,0.9125,1.732, 0.8655,0.7239,0.5885, 0.8655,0.7195,0.5732, 0.0227,-0.4205,0.005086, 0.557,1.663,0.7745
		}
		
	
	// Model call	
		MODEL
		{
		model = UniversalStorage2/Parts/Lifesupport/FoodWedge
		scale = 1, 1, 1
		}
	
	
	// Plugin Control	
		MODULE
		{
			name = USSwitchControl
			SwitchID = 0
			ButtonName = Height
			ShowPreviousButton = False		
			ObjectNames = Single height;Double height;Triple height;Quad height
			FuelSwitchModeOne = True
		}
		
		
		MODULE
		{
			name = USMeshSwitch
			SwitchID = 0
			MeshTransforms = FoodWedgeSingle;FoodWedgeDouble;FoodWedgeTriple;FoodWedgeQuad
			AffectColliders = True
			DeleteUnused = True
		}
		
		
		MODULE
		{
			name = USDragSwitch
			SwitchID = 0
			DragCubes = A0;A1;A2;A3
		}
	
	// Wedge attach node definitions
		NODE
		{
			name = attach
			transform = attach
			size = 0
			method = HINGE_JOINT
		}
	
}


//USI Life Support!
@PART[USFoodWedge]:NEEDS[USILifeSupport]
{
	@description = Designed to fit on Universal Storage cores, these storage bags packed to the brim with Nutritional Organic Meal Substitutes (N.O.M.S.).  Excess consumption may cause bloating. Available in 4 standard sizes.
	@title = Universal Storage: Life support supply bag
	
	@cost = 240
	@mass = 0.125
		
	@TechRequired = spaceExploration
	@entryCost = 2800
	
	
	// Plugin control	
		MODULE
		{
			name = USFuelSwitch
			SwitchID = 0
			resourceNames = Supplies;Supplies;Supplies;Supplies
			resourceAmounts = 125;250;375;500
			initialResourceAmounts = 125;250;375;500
			tankCost = 0;240;480;720
			tankMass = 0;.125;.240;.375
			basePartMass = 0.125
			basePartCost = 240
			hasGUI = False
			availableInEditor = False
			displayCurrentTankCost = True
		}	
}

//TAC Life Support!
@PART[USFoodWedge]:NEEDS[TacLifeSupport]
{
	@description = Designed to fit on Universal Storage cores, these storage bags packed to the brim with a tasty selection of food and drink. Available in 4 standard sizes.  (Warning, may contain nuts)
	@title = Universal Storage: Food bag
	
	@cost = 180
	@mass = 0.134
		
	@TechRequired = spaceExploration
	@entryCost = 2800
	
	
	// Plugin control	
		MODULE
		{
			name = USFuelSwitch
			SwitchID = 0
			resourceNames = Food;Food;Food;Food
			resourceAmounts = 120;240;360;480
			initialResourceAmounts = 120;240;360;480
			tankCost = 0;180;360;540
			tankMass = 0;.134;.267;.401
			basePartMass = 0.134
			basePartCost = 180
			hasGUI = False
			availableInEditor = False
			displayCurrentTankCost = True
		}	
}
		