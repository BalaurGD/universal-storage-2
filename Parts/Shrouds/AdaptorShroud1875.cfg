PART
{
// Common to all parts in the mod
// ------------------------------

		module = Part
		author = Daishi, DMagic, and Paul Kingtiger 
		manufacturer = New Horizons & Nox Industrial
		subcategory = 0

		
// Stuff that gets tweaked and balanced a lot
// ------------------------------------------

		title = Universal Storage Adapter Shroud (1.875m - 2.5m)
		category = Payload
	
		cost = 300
		mass = 0.15
		
		TechRequired = advConstruction
		entryCost = 3600
		
		maxTemp = 1200
		
		fuelCrossFeed = True
		
		bulkheadProfiles = size2
		crashTolerance = 15
		
	
// Stuff in here should have stable values
// ---------------------------------------

		description = A tapered inline shroud, designed to attach below capsules acting as a 1.875m to 2.5m service bay. Can be outfitted empty for housing a larger payload, or mounted with a Hexcore for wedge attachment.
	
		rescaleFactor = 1
	
	
// This shouldn't be changing at all!
// ----------------------------------

		tags =  Universal Storage Shroud Payload Gemini Service Module Bay
		
		attachRules = 1,0,1,1,0
		

// Don't edit anything below this line.  Here be dragons!
// ------------------------------------------------------

		name = USAdaptorShroud1875


	// Drag. "A" cubes are core heights, "B" cubes are opened bays for said height. 
		angularDrag = 1
		dragModelType = default
		maximum_drag = 0.2
		minimum_drag = 0.2

		DRAG_CUBE
		{
			cube = A0, 3.854,0.7643,2.842, 3.854,0.7651,2.358, 4.87,0.629,1.768, 5.02,0.9341,0.8378, 3.855,0.7643,2.256, 3.856,0.7631,1.74, 0.2554,0.8316,1.192E-07, 3.05,1.76,2.539
			cube = B0, 3.186,0.6341,5.577, 3.183,0.6323,4.11, 14.46,0.8985,1.787, 14.58,0.9019,1.238, 2.776,0.5992,4.187, 2.777,0.603,5.56, 0.009465,0.6019,0.001366, 5.558,2.173,5.54
			cube = A1, 3.854,0.7643,2.842, 3.854,0.7651,2.358, 4.87,0.629,1.768, 5.02,0.9341,0.8378, 3.855,0.7643,2.256, 3.856,0.7631,1.74, 0.2554,0.8316,1.192E-07, 3.05,1.76,2.539
			cube = B1, 3.186,0.6341,5.577, 3.183,0.6323,4.11, 14.46,0.8985,1.787, 14.58,0.9019,1.238, 2.776,0.5992,4.187, 2.777,0.603,5.56, 0.009465,0.6019,0.001366, 5.558,2.173,5.54
		}

		
	// Model call		
		MODEL
		{
		model = UniversalStorage2/Parts/Shrouds/AdaptorShroud1875
		scale = 1, 1, 1
		}
	
	
	// Plugin Control. Do not change load order! Index0 must always be animategeneric, Index1 always the dragswitch module. ModuleCargoBay must always reference index0 to enable drag occulsion. 
		MODULE
		{
			name = USAnimateGeneric
			dragModuleIndex = 1
			primaryAnimationName = Take 001
			//secondaryAnimationName = Take 002
			primaryAvailableInEVA = true
			primaryAvailableInVessel = true
			primaryAvailableInEditor = true
			primaryActionAvailable = true
			//secondaryAvailableInEVA = true
			//secondaryAvailableInVessel = true
			//secondaryAvailableInEditor = true
			//secondaryActionAvailable = true
			combinedAvailableInEVA = true
			combinedAvailableInVessel = true
			combinedAvailableInEditor = true
			combinedActionAvailable = true
			
			//jettisonAvailable = true
			//jettisonIndices = 5;6;7;8
			
			SwitchID = 0
			AnimationControlState = 1;1
		}
		
		MODULE
		{
			name = USDragSwitch
			SwitchID = 0
			DragCubes = A0,B0;A1,B1
		}
			
		MODULE
		{
			name = ModuleCargoBay
			DeployModuleIndex = 0
			lookupCenter = -0.3,0.2,-0.07
			closedPosition = 0
			lookupRadius = 2.5
		}
		
		// MODULE UNUSED
		// {
		// 	name = ModuleJettison
		// 	jettisonName = polySurface291
		// 	bottomNodeName = OuterNode
		// 	allowShroudToggle = False
		//  hideJettisonMenu = True
		// 	isFairing = False
		// 	jettisonedObjectMass = 0.01
		// 	jettisonForce = 5
		// 	jettisonDirection = -1 0 1
		// 	stagingEnable = True
		// 	stagingToggleEnabledEditor = False
		// 	stagingToggleEnabledFlight = False
		// }
		
		MODULE
		{
			name = USSwitchControl
			SwitchID = 0
			ButtonName = Function
			ShowPreviousButton = False		
			ObjectNames = Wedge mount;Payload Bay
		}
		
		MODULE
		{
			name = USMeshSwitch
			SwitchID = 0
			MeshTransforms = WedgeSocket;PayloadSocket
			AffectColliders = True
			DeleteUnused = True
		}
		
		MODULE
		{
			name = USNodeSwitch
			SwitchID = 0
			AttachNodes = Wedge;Stack
		}

		MODULE
		{
			name = USCostSwitch
			SwitchID = 0
			DisplayCurrentModeCost = True
			AddedCost = 0;500
		}
		
		MODULE
		{
			name = USMassSwitch
			SwitchID = 0
			DisplayCurrentModeMass = True
			AddedMass = 0;0.25
		}
		
		
	// Stack node definitions
	NODE
		{
		 name = OuterNode
		 transform = OuterNode
		 size = 1
		 method = FIXED_JOINT
		}

	NODE
		{
		 name = InnerNode
		 transform = InnerNode
		 size = 1
		 method = FIXED_JOINT
		}
		
	NODE
		{
		 name = PayloadNodeTop
		 transform = PayloadNodeTop
		 size = 1
		 method = FIXED_JOINT
		}
		
	NODE
		{
		 name = PayloadNodeBottom
		 transform = PayloadNodeBottom
		 size = 1
		 method = FIXED_JOINT
		}
		
		
	// Node Groups
		MODULE
		{
			name = ModuleStructuralNode
			rootObject = Stack
			attachNodeNames = InnerNode,OuterNode,PayloadNodeBottom,PayloadNodeTop
		}
		
		MODULE
		{
			name = ModuleStructuralNode
			rootObject = Wedge	
			attachNodeNames = InnerNode,OuterNode
		}
	
}