// Universal Storage 2 by Paul Kingtiger, Daishi and DMagic.
// See packaged file for license information

// This file is best viewed with notepad++ https://notepad-plus-plus.org/
// Using the KSP Module Manager language file from http://www.kingtiger.online/

PART
{
	// name = USAdaptorShroud1875

	// Common fields
	// Every part has these core variables
	/+
		// Base attributes
			title = Universal Storage: 1.875m to 2.5m tapered service module fairing.
			category = Payload
			tags =  Universal Storage Shroud Payload Gemini Service Module Bay
			description = A large fixed height service bay fairing, Tapering from 2.5m down to 1.875m.  Paired with the Universal Storage: Six bay service core (1.875m) it provides useful payload space for large, multi diameter rocket stacks.  Alternatively it can be used alone to provide large payload space.  Four large doors provide excellent access to the contents.
	   
			// Balanced against Stock: cost = 900
			// Balanced against Stock: mass = 0.225
			cost = 600
			mass = 0.125
			maxTemp = 2000
			fuelCrossFeed = True
			bulkheadProfiles = size2
			crashTolerance = 9

		// Tech Tree
			TechRequired = specializedConstruction
			entryCost = 6200
	/-			
		
	// Special 
	// Contains any special functionality for this part
	/+
	
		// Connected Living Space
				MODULE:NEEDS[ConnectedLivingSpace]
				{
					name = ModuleConnectedLivingSpace
					passable = true
				}	
	/-

	// Shared by all parts in the mod
	// Module, Author, Manufacturer, Subcategory
	// These values should never change and are common to all parts.
	/+
			module = Part
			author = Daishi , DMagic , and Paul Kingtiger 
			manufacturer = New Horizons & Nox Industrial
			subcategory = 0
	/-

	// Don't edit anything below this line.  Here be dragons!
	// Drag, Model call, US*Switch
	// Changing these values breaks the part, so don't do that!
	/+

			name = USAdaptorShroud1875
			rescaleFactor = 1
			attachRules = 1,0,1,1,0
			

		// Drag. "A" cubes are core heights, "B" cubes are opened bays for said height. 
			angularDrag = 1
			dragModelType = default
			maximum_drag = 0.2
			minimum_drag = 0.2

			DRAG_CUBE
			{
				cube = A0, 3.854,0.7643,2.842, 3.854,0.7651,2.358, 4.87,0.629,1.768, 5.02,0.9341,0.8378, 3.855,0.7643,2.256, 3.856,0.7631,1.74, 0.2554,0.8316,1.192E-07, 3.05,1.76,2.539
				cube = B0, 3.186,0.6341,5.577, 3.183,0.6323,4.11, 14.46,0.8985,1.787, 14.58,0.9019,1.238, 2.776,0.5992,4.187, 2.777,0.603,5.56, 0.009465,0.6019,0.001366, 5.558,2.173,5.54
				cube = A1, 3.854,0.7643,2.842, 3.854,0.7651,2.358, 4.87,0.629,1.768, 5.02,0.9341,0.8378, 3.855,0.7643,2.256, 3.856,0.7631,1.74, 0.2554,0.8316,1.192E-07, 3.05,1.76,2.539
				cube = B1, 3.186,0.6341,5.577, 3.183,0.6323,4.11, 14.46,0.8985,1.787, 14.58,0.9019,1.238, 2.776,0.5992,4.187, 2.777,0.603,5.56, 0.009465,0.6019,0.001366, 5.558,2.173,5.54
			}

			
		// Model call		
			MODEL
			{
			model = UniversalStorage2/Parts/Shrouds/AdaptorShroud1875
			scale = 1, 1, 1
			}
			
		
		// Plugin Control. Do not change load order! Index0 must always be animategeneric, Index1 always the dragswitch module. ModuleCargoBay must always reference index0 to enable drag occulsion. 
			MODULE
			{
				name = USAnimateGeneric
				dragModuleIndex = 1
				primaryAnimationName = Take 001
				//secondaryAnimationName = Take 002
				primaryAvailableInEVA = true
				primaryAvailableInVessel = true
				primaryAvailableInEditor = true
				primaryActionAvailable = true
				//secondaryAvailableInEVA = true
				//secondaryAvailableInVessel = true
				//secondaryAvailableInEditor = true
				//secondaryActionAvailable = true
				combinedAvailableInEVA = true
				combinedAvailableInVessel = true
				combinedAvailableInEditor = true
				combinedActionAvailable = true
				
				//jettisonAvailable = true
				//jettisonIndices = 5;6;7;8
				
				SwitchID = 0
				AnimationControlState = 1;1
			}
			
			MODULE
			{
				name = USDragSwitch
				SwitchID = 0
				DragCubes = A0,B0;A1,B1
			}
				
			MODULE
			{
				name = ModuleCargoBay
				DeployModuleIndex = 0
				lookupCenter = -0.3,0.2,-0.07
				closedPosition = 0
				lookupRadius = 2.5
			}
			
			// MODULE UNUSED
			// {
			// 	name = ModuleJettison
			// 	jettisonName = polySurface291
			// 	bottomNodeName = OuterNode
			// 	allowShroudToggle = False
			//  hideJettisonMenu = True
			// 	isFairing = False
			// 	jettisonedObjectMass = 0.01
			// 	jettisonForce = 5
			// 	jettisonDirection = -1 0 1
			// 	stagingEnable = True
			// 	stagingToggleEnabledEditor = False
			// 	stagingToggleEnabledFlight = False
			// }
			
			MODULE
			{
				name = USSwitchControl
				SwitchID = 0
				ButtonName = Function
				ShowPreviousButton = False		
				ObjectNames = Wedge mount;Payload Bay
			}
			
			MODULE
			{
				name = USMeshSwitch
				SwitchID = 0
				MeshTransforms = WedgeSocket;PayloadSocket
				AffectColliders = True
				DeleteUnused = True
			}
			
			MODULE
			{
				name = USNodeSwitch
				SwitchID = 0
				AttachNodes = Wedge;Stack
			}

			MODULE
			{
				name = USCostSwitch
				SwitchID = 0
				DisplayCurrentModeCost = True
				AddedCost = 0;0
			}
			
			MODULE
			{
				name = USMassSwitch
				SwitchID = 0
				DisplayCurrentModeMass = True
				AddedMass = 0;0
			}
				
			
		// Stack node definitions
			NODE
				{
				 name = OuterNode
				 transform = OuterNode
				 size = 1
				 method = FIXED_JOINT
				}

			NODE
				{
				 name = InnerNode
				 transform = InnerNode
				 size = 1
				 method = FIXED_JOINT
				}
				
			NODE
				{
				 name = PayloadNodeTop
				 transform = PayloadNodeTop
				 size = 1
				 method = FIXED_JOINT
				}
				
			NODE
				{
				 name = PayloadNodeBottom
				 transform = PayloadNodeBottom
				 size = 1
				 method = FIXED_JOINT
				}
			
			
		// Node Groups
			MODULE
			{
				name = ModuleStructuralNode
				rootObject = Stack
				attachNodeNames = InnerNode,OuterNode,PayloadNodeBottom,PayloadNodeTop
			}
			
			MODULE
			{
				name = ModuleStructuralNode
				rootObject = Wedge	
				attachNodeNames = InnerNode,OuterNode
			}
	/-	
}

// Module Manager
// Contains @PART code for Module Manager, things that cannot be placed in within PART{}
/+ 


/-

// Notes
/+
// Structure balanced against 300% of T-25 Structure Tube.
// Then rebalanced with other structure parts (see Universal Storage 2 Excel workbook)
/-