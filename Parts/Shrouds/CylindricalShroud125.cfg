// Universal Storage 2 by Paul Kingtiger, Daishi and DMagic.
// See packaged file for license information

// This file is best viewed with notepad++ https://notepad-plus-plus.org/
// Using the KSP Module Manager language file from http://www.kingtiger.online/

PART
{
	// name = USCylindricalShroud125

	// Common fields
	// Every part has these core variables
	/+
		// Base attributes
			title = Universal Storage: Cylindrical fairing (1.25m)
			category = Payload
			tags = Universal Storage Shroud Payload
			description = An upwards expanding faring, designed to provide aerodynamic protection to four bay service modules. Place on the bottom of the assembled core, and toggle the height to match. Service doors allow access on mission (can be jettisoned in case of emergency). Available in Apollo, Gemini, Porkjet and Saturn V inspired color schemes.  
			// Balanced against Stock:cost = 50
			// Balanced against Stock:mass = 0.010
			cost = 85
			mass = 0.010
			maxTemp = 2000
			fuelCrossFeed = True
			bulkheadProfiles = size2
			crashTolerance = 6
		
		// Tech Tree
			TechRequired = advConstruction
			entryCost = 3600	
	/-

	// Shared by all parts in the mod
	// Module, Author, Manufacturer, Subcategory
	// These values should never change and are common to all parts.
	/+
			module = Part
			author = Daishi , DMagic , and Paul Kingtiger 
			manufacturer = New Horizons & Nox Industrial
			subcategory = 0
	/-

	// Don't edit anything below this line.  Here be dragons!
	// Drag, Model call, US*Switch
	// Changing these values breaks the part, so don't do that!
	/+
			name = USCylindricalShroud125
			rescaleFactor = 1
			attachRules = 1,0,1,1,0
			

		// Drag. "A" cubes are core heights, "B" cubes are opened bays for said height. 
			angularDrag = 1
			dragModelType = default
			maximum_drag = 0.2
			minimum_drag = 0.2

			DRAG_CUBE
			{
				cube = A0, 0.7212,0.7309,1.347, 0.7212,0.7447,0.7341, 1.26,0.9468,0.5392, 1.26,0.9179,0.3179, 0.7212,0.764,0.9826, 0.7212,0.7596,0.9826, -1.013E-06,0.1556,0, 1.274,0.5947,1.274
				cube = B0, 0.7212,0.7309,1.347, 0.7212,0.7447,0.7341, 1.26,0.9468,0.5392, 1.26,0.9179,0.3179, 0.7212,0.764,0.9826, 0.7212,0.7596,0.9826, -1.013E-06,0.1556,0, 1.274,0.5947,1.274
				cube = A1, 1.241,0.7612,0.7341, 1.241,0.7612,0.7341, 1.26,0.9487,0.9482, 1.26,0.9174,0.3161, 1.241,0.762,0.7341, 1.241,0.761,0.7341, -7.153E-07,0.3597,0, 1.274,1.003,1.274
				cube = B1, 1.241,0.7612,0.7341, 1.241,0.7612,0.7341, 1.26,0.9487,0.9482, 1.26,0.9174,0.3161, 1.241,0.762,0.7341, 1.241,0.761,0.7341, -7.153E-07,0.3597,0, 1.274,1.003,1.274
				cube = A2, 1.76,0.7657,0.9653, 1.76,0.7656,0.9653, 1.26,0.9483,1.359, 1.26,0.9186,0.316, 1.76,0.7663,0.9653, 1.76,0.7656,0.9653, 5.96E-08,0.564,0, 1.274,1.412,1.274
				cube = B2, 1.76,0.7657,0.9653, 1.76,0.7656,0.9653, 1.26,0.9483,1.359, 1.26,0.9186,0.316, 1.76,0.7663,0.9653, 1.76,0.7656,0.9653, 5.96E-08,0.564,0, 1.274,1.412,1.274
				cube = A3, 2.278,0.7717,0.9595, 2.278,0.7719,0.9595, 1.26,0.9489,1.767, 1.26,0.9186,0.3169, 2.278,0.7722,0.9595, 2.278,0.7713,0.9595, 7.153E-07,0.7684,0, 1.274,1.82,1.274
				cube = B3, 2.278,0.7717,0.9595, 2.278,0.7719,0.9595, 1.26,0.9489,1.767, 1.26,0.9186,0.3169, 2.278,0.7722,0.9595, 2.278,0.7713,0.9595, 7.153E-07,0.7684,0, 1.274,1.82,1.274
			}


		// Model call	
			MODEL
			{
			model = UniversalStorage2/Parts/Shrouds/CylindricalShroud125
			scale = 1, 1, 1
			}


		// Plugin Control. Do not change load order! Index0 must always be animategeneric, Index1 always the dragswitch module. ModuleCargoBay must always reference index0 to enable drag occulsion. 
			MODULE
			{
				name = USAnimateGeneric
				dragModuleIndex = 1
				primaryAnimationName = Take 001
				//secondaryAnimationName = Take 002
				primaryAvailableInEVA = true
				primaryAvailableInVessel = true
				primaryAvailableInEditor = true
				primaryActionAvailable = true
				secondaryAvailableInEVA = false
				secondaryAvailableInVessel = false
				secondaryAvailableInEditor = false
				secondaryActionAvailable = false
				combinedAvailableInEVA = false
				combinedAvailableInVessel = false
				combinedAvailableInEditor = false
				combinedActionAvailable = false
				
				//jettisonAvailable = true
				//jettisonIndices = 5;6;7;8
				
				SwitchID = 0
				AnimationControlState = 1;1;1;1
			}
			
			MODULE
			{
				name = USDragSwitch
				SwitchID = 0
				DragCubes = A0,B0;A1,B1;A2,B2;A3,B3
			}
				
			MODULE
			{
				name = ModuleCargoBay
				DeployModuleIndex = 0
				lookupCenter = -0.3,0.2,-0.07
				closedPosition = 0
				lookupRadius = 1.25
			}
			
			// MODULE UNUSED
			// {
			// 	name = ModuleJettison
			// 	jettisonName = polySurface291
			// 	bottomNodeName = OuterNode
			// 	allowShroudToggle = False
			//  hideJettisonMenu = True
			// 	isFairing = False
			// 	jettisonedObjectMass = 0.01
			// 	jettisonForce = 5
			// 	jettisonDirection = -1 0 1
			// 	stagingEnable = True
			// 	stagingToggleEnabledEditor = False
			// 	stagingToggleEnabledFlight = False
			// }
			
			MODULE
			{
				name = USSwitchControl
				SwitchID = 0
				ButtonName = Height and Function
				ShowPreviousButton = False		
				ObjectNames = Single height;Double height;Triple height;Quad height
			}
			
			MODULE
			{
				name = USMeshSwitch
				SwitchID = 0
				MeshTransforms = OneHigh;TwoHigh;ThreeHigh;FourHigh
				AffectColliders = True
				DeleteUnused = True
			}
			
			MODULE
			{
				name = USNodeSwitch
				SwitchID = 0
				AttachNodes = HeightOne;HeightTwo;HeightThree;HeightFour
			}
			
			MODULE
			{
				name = USSwitchControl
				SwitchID = 1
				ButtonName = Appearance
				ShowPreviousButton = False		
				ObjectNames = Apollo;Gemini;Porkjet;Saturn
			}
			
			MODULE
			{
				name = USMeshSwitch
				SwitchID = 1
				MeshTransforms = OneHighApollo,TwoHighApollo,ThreeHighApollo,FourHighApollo;OneHighGemini,TwoHighGemini,ThreeHighGemini,FourHighGemini;OneHighPorkjet,TwoHighPorkjet,ThreeHighPorkjet,FourHighPorkjet;OneHighSaturn,TwoHighSaturn,ThreeHighSaturn,FourHighSaturn		
				AffectColliders = True
			}
			
			
		// Special 
		// Contains any special functionality for this part
		/+
		
			// Universal Storage Cost and Mass control for part versions
			// Added cost / Added Mass values add to the normal cost and mass above so the values for the first variant are usually 0
			// Each variant is separated by ;
			// Note these added values will not be shown when hovering over the part list in the VAB / SPH.
			// Right clicking on the part once it has been added to the craft will show the values.
				MODULE
				{
					name = USCostSwitch
					SwitchID = 0
					DisplayCurrentModeCost = True
					AddedCost = 0;85;170;255
				}
				
				MODULE
				{
					name = USMassSwitch
					SwitchID = 0
					DisplayCurrentModeMass = True
					AddedMass = 0.000;0.010;0.020;0.030
				}
				
				
			// Connected Living Space
				MODULE:NEEDS[ConnectedLivingSpace]
				{
					name = ModuleConnectedLivingSpace
					passable = true
				}	
		/-

		// Stack node definitions
			NODE
			{
			 name = OuterNode
			 transform = OuterNode
			 size = 1
			 method = FIXED_JOINT
			}

			NODE
			{
			 name = InnerNode
			 transform = InnerNode
			 size = 1
			 method = FIXED_JOINT
			}
			
			
		// Node Groups
			MODULE
			{
				name = ModuleStructuralNode
				rootObject = HeightOne
				attachNodeNames = InnerNode,OuterNode
			}
			
			MODULE
			{
				name = ModuleStructuralNode
				rootObject = HeightTwo	
				attachNodeNames = InnerNode,OuterNode
			}
			
			MODULE
			{
				name = ModuleStructuralNode
				rootObject = HeightThree
				attachNodeNames = InnerNode,OuterNode
			}
			
			MODULE
			{
				name = ModuleStructuralNode
				rootObject = HeightFour
				attachNodeNames = InnerNode,OuterNode
			}
	/-
}
// Module Manager
// Contains @PART code for Module Manager, things that cannot be placed in within PART{}
/+ 


/-

// Notes
/+
// Structure balanced against 50% of US_QuadCore (Cost and Mass).
// Then rebalanced with other structure parts (see Universal Storage 2 Excel workbook)
/-